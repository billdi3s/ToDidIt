# 2done+1 Time Canvas – Replit Deployment Guide

This guide walks you through deploying the 2done+1 Time Canvas MVP on Replit.

## Prerequisites

- A Replit account (https://replit.com)
- A Supabase project with database configured
- Your Supabase project URL and anon key

## Step 1: Create a New Replit Project

1. Go to https://replit.com and log in
2. Click "Create Replit" → "Create Repl"
3. Select "Node.js" as the language
4. Name your project: `2done-plus-one-time-canvas`
5. Click "Create Repl"

## Step 2: Upload Project Files

### Option A: Clone from Git (Recommended)
1. In Replit, open the Shell tab
2. Run:
   ```bash
   git clone <your-github-repo-url> .
   ```
3. Or upload the zip file through Replit's file UI

### Option B: Upload Zip File
1. Download the project as a `.zip` from your local machine
2. In Replit, click the Files icon (left sidebar)
3. Click the three-dot menu → "Upload files"
4. Select `2done+1_Starter_Kit_Optimized.zip`
5. Extract in Replit Shell:
   ```bash
   unzip 2done+1_Starter_Kit_Optimized.zip
   ```

## Step 3: Install Dependencies

1. In Replit Shell, run:
   ```bash
   npm install
   ```
   This installs all dependencies from `package.json`:
   - React 18
   - Vite (build tool)
   - TypeScript
   - Tailwind CSS
   - Supabase client
   - and more

2. Wait for installation to complete (usually 2-3 minutes)

## Step 4: Configure Environment Variables

1. In Replit, click the "Secrets" icon (lock icon in left sidebar)
2. Add two secrets:

   **Secret 1:**
   - Key: `VITE_SUPABASE_URL`
   - Value: `https://YOUR-PROJECT.supabase.co` (your Supabase URL)

   **Secret 2:**
   - Key: `VITE_SUPABASE_ANON_KEY`
   - Value: `YOUR_PUBLIC_ANON_KEY` (your Supabase anon key from project settings)

3. Click "Add secret" for each one

**Note:** In Replit, secrets are automatically exposed as environment variables to your build process.

## Step 5: Build the Project

1. In Replit Shell, run:
   ```bash
   npm run build
   ```

2. This will:
   - Compile TypeScript and JSX
   - Bundle with Vite
   - Create optimized production files in the `dist/` directory
   - Process Tailwind CSS

3. Wait for build to complete (usually 30-60 seconds)

## Step 6: Preview/Run the Application

### Option A: Serve Built Files (Recommended for Production)
1. Install a simple HTTP server:
   ```bash
   npm install -g serve
   ```

2. Serve the built files:
   ```bash
   serve dist -l 3000
   ```

3. Replit will show a "Webview" button → click to open your app

### Option B: Run Development Server
1. In Replit Shell, run:
   ```bash
   npm run dev
   ```

2. This runs the Vite dev server on localhost:5173
3. Click the "Webview" button to see your app

## Step 7: Configure Supabase RLS Policies

Before testing login functionality:

1. Go to your Supabase project dashboard
2. Go to SQL Editor
3. Run the schema setup (if not already done):
   ```sql
   -- Copy contents from supabase/schema.sql
   ```

4. Run the RLS policies:
   ```sql
   -- Copy contents from supabase/policies.sql
   ```

5. Enable email/OAuth authentication in Supabase project settings

## Step 8: Test the Application

1. Open the web preview in Replit
2. You should see:
   - A login prompt (Supabase Auth)
   - After login: Today's Time Canvas with check-in card
   - A timeline of time blocks and gaps
3. Try creating a time block entry:
   - Fill in the check-in form
   - Select occupations and activities
   - Submit to save

## Environment Variables Reference

The project uses these environment variables (set in Replit Secrets):

| Variable | Description | Example |
|----------|-------------|---------|
| `VITE_SUPABASE_URL` | Your Supabase project URL | `https://abc123.supabase.co` |
| `VITE_SUPABASE_ANON_KEY` | Public anon key from Supabase | `eyJhbGciOiJIUzI1NiIs...` |

## File Structure

```
2done+1_Starter_Kit_Optimized/
├── src/                          # React source code
│   ├── components/               # React components
│   ├── hooks/                    # Custom React hooks
│   ├── context/                  # React context (auth, etc)
│   ├── lib/                      # Utilities and Supabase client
│   ├── types/                    # TypeScript type definitions
│   └── App.tsx                   # Main app component
├── supabase/                     # Database schema and policies
│   ├── schema.sql                # Table definitions
│   └── policies.sql              # RLS policies
├── SPEC/                         # Project specifications
├── dist/                         # Production build output (generated by npm run build)
├── package.json                  # NPM dependencies and scripts
├── vite.config.ts                # Vite bundler config
├── tsconfig.json                 # TypeScript config
├── tailwind.config.js            # Tailwind CSS config
├── postcss.config.js             # PostCSS config
├── index.html                    # HTML entry point
├── .env.example                  # Environment variables template
├── .gitignore                    # Git ignore rules
└── README.md                     # Original project README
```

## Build Scripts

- `npm run dev` — Start Vite dev server (localhost:5173)
- `npm run build` — Create production build in `dist/`
- `npm run preview` — Preview the production build locally

## Troubleshooting

### Build fails with missing dependencies
```bash
npm install
npm run build
```

### Environment variables not loading
1. Check Replit Secrets (lock icon in sidebar)
2. Verify keys match exactly: `VITE_SUPABASE_URL` and `VITE_SUPABASE_ANON_KEY`
3. Rebuild after adding secrets:
   ```bash
   npm run build
   ```

### Supabase connection fails
1. Verify Supabase URL and anon key are correct in Secrets
2. Check Supabase project is active and accessible
3. Verify RLS policies are applied to tables
4. Check browser console for detailed error messages

### Blank page after login
1. Check browser console (F12) for errors
2. Verify Supabase schema tables exist: `time_blocks`, `occupations`, `activities`, `users`
3. Ensure RLS policies are enabled correctly

## Next Steps

After successful deployment:

1. **Test all features:**
   - Sign up/login through Supabase Auth
   - Create time block entries
   - View timeline of activities
   - Check gap calculations

2. **Customize the project:**
   - Modify components in `src/components/`
   - Add new features following the existing patterns
   - Refer to `SPEC/` directory for architecture details

3. **Monitor and maintain:**
   - Check Supabase logs for database errors
   - Monitor Replit resource usage
   - Keep dependencies updated: `npm update`

## Support & Documentation

- **Replit Docs:** https://docs.replit.com
- **Vite Docs:** https://vitejs.dev
- **React Docs:** https://react.dev
- **Supabase Docs:** https://supabase.com/docs
- **Tailwind CSS Docs:** https://tailwindcss.com/docs

## Deployment Checklist

- [ ] Replit project created
- [ ] Project files uploaded
- [ ] `npm install` completed
- [ ] Environment variables set in Replit Secrets
- [ ] `npm run build` succeeds
- [ ] Supabase database schema applied
- [ ] Supabase RLS policies applied
- [ ] Authentication enabled in Supabase
- [ ] App preview loads without errors
- [ ] Login functionality works
- [ ] Time blocks can be created and viewed

---

**Created:** December 1, 2025
**Project Version:** 0.2.0
**Stack:** React 18 + Vite + TypeScript + Tailwind CSS + Supabase
